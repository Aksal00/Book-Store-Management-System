{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\My Projects\\\\Test_Project_1\\\\Book-Store-Management-System\\\\frontend\\\\src\\\\Books.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport BookForm from \"./BookForm\";\nimport BooksTable from \"./BooksTable\";\nimport { Box } from '@mui/material';\nimport Axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Books = () => {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [submitted, setSubmitted] = useState(false);\n  const [isEdit, setIsEdit] = useState(false);\n  const [selectedBook, setSelectedBook] = useState({});\n  useEffect(() => {\n    getBooks();\n  }, []);\n  const getBooks = () => {\n    Axios.get('http://localhost:3001/api/books').then(response => {\n      var _response$data;\n      setBooks(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.response) || []);\n    }).catch(error => {\n      console.error(\"Axios Error: \", error);\n    });\n  };\n  const addBook = data => {\n    setSubmitted(true);\n    const payload = {\n      id: data.id,\n      name: data.name,\n      author: data.author\n    };\n    // Check if a book with the same ID already exists\n    Axios.get(`http://localhost:3001/api/books/${data.id}`).then(response => {\n      if (response.data && response.data.length > 0) {\n        // Book with the same ID exists\n        alert(\"A book with this ID already exists. Please use a different ID.\");\n        setSubmitted(false);\n      } else {\n        // Proceed to add the new book\n        Axios.post('http://localhost:3001/api/addbook', payload).then(() => {\n          getBooks();\n          setSubmitted(false);\n          setIsEdit(false);\n        }).catch(error => {\n          console.error(\"Axios Error: \", error);\n        });\n      }\n    }).catch(error => {\n      console.error(\"Axios Error: \", error);\n    });\n  };\n  const updateBook = data => {\n    setSubmitted(true);\n    const payload = {\n      id: data.id,\n      name: data.name,\n      author: data.author\n    };\n    Axios.put('http://localhost:3001/api/updatebook', payload).then(() => {\n      getBooks();\n      setSubmitted(false);\n      isEdit(false);\n    }).catch(error => {\n      console.error(\"Axios Error: \", error);\n    });\n  };\n  const deleteBook = data => {\n    Axios.post('http://localhost:3001/api/deletebook', data).then(() => {\n      getBooks();\n    }).catch(error => {\n      console.error(\"Axios Error: \", error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: '100px',\n      margin: 'auto',\n      marginTop: '100px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(BookForm, {\n      addBook: addBook,\n      updateBook: updateBook,\n      submitted: submitted,\n      data: selectedBook,\n      isEdit: isEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(BooksTable, {\n      rows: books,\n      selectedBook: data => {\n        setSelectedBook(data);\n        setIsEdit(true);\n      },\n      deleteBook: data => window.confirm('Are you sure?') && deleteBook(data)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n};\n_s(Books, \"DRbLyBc/VgmMVFbR4txFzGM3eXI=\");\n_c = Books;\nexport default Books;\nvar _c;\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["useEffect","useState","BookForm","BooksTable","Box","Axios","jsxDEV","_jsxDEV","Books","_s","books","setBooks","submitted","setSubmitted","isEdit","setIsEdit","selectedBook","setSelectedBook","getBooks","get","then","response","_response$data","data","catch","error","console","addBook","payload","id","name","author","length","alert","post","updateBook","put","deleteBook","sx","padding","margin","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","rows","window","confirm","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/My Projects/Test_Project_1/Book-Store-Management-System/frontend/src/Books.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport BookForm from \"./BookForm\"\r\nimport BooksTable from \"./BooksTable\"\r\nimport { Box} from '@mui/material'\r\nimport Axios from \"axios\"\r\n\r\n\r\nconst Books = ()=>{\r\n    const [books,setBooks] = useState([]);\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [selectedBook,setSelectedBook] = useState({});\r\n\r\n    useEffect(()=>{\r\n        getBooks(); \r\n    },[]);\r\n    const getBooks = () =>{\r\n        Axios.get('http://localhost:3001/api/books')\r\n            .then(response =>{\r\n                setBooks(response.data?.response||[]);\r\n            })\r\n            .catch(error =>{\r\n                console.error(\"Axios Error: \",error)\r\n            })\r\n    }\r\n\r\n    const addBook = (data) =>{\r\n        setSubmitted(true);\r\n        const payload ={\r\n            id: data.id,\r\n            name: data.name,\r\n            author: data.author,\r\n        }\r\n        // Check if a book with the same ID already exists\r\n    Axios.get(`http://localhost:3001/api/books/${data.id}`)\r\n    .then(response => {\r\n        if (response.data && response.data.length > 0) {\r\n            // Book with the same ID exists\r\n            alert(\"A book with this ID already exists. Please use a different ID.\");\r\n            setSubmitted(false);\r\n        } else {\r\n            // Proceed to add the new book\r\n            Axios.post('http://localhost:3001/api/addbook', payload)\r\n                .then(() => {\r\n                    getBooks();\r\n                    setSubmitted(false);\r\n                    setIsEdit(false);\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"Axios Error: \", error)\r\n                })\r\n        }\r\n    })\r\n    .catch(error => {\r\n        console.error(\"Axios Error: \", error)\r\n    })\r\n    }\r\n    const updateBook = (data) =>{\r\n        setSubmitted(true);\r\n        const payload ={\r\n            id: data.id,\r\n            name: data.name,\r\n            author: data.author,\r\n        }\r\n        Axios.put('http://localhost:3001/api/updatebook',payload)\r\n            .then(()=>{\r\n                getBooks();\r\n                setSubmitted(false);\r\n                isEdit(false);\r\n            })\r\n            .catch(error =>{\r\n                console.error(\"Axios Error: \",error)\r\n            })\r\n    \r\n    }\r\n    const deleteBook = (data) =>{\r\n       \r\n        Axios.post('http://localhost:3001/api/deletebook',data)\r\n            .then(()=>{\r\n                getBooks();\r\n            })\r\n            .catch(error =>{\r\n                console.error(\"Axios Error: \",error)\r\n            })\r\n    \r\n    }\r\n\r\n    return(\r\n        <Box \r\n            sx={{\r\n                padding: '100px',\r\n                margin: 'auto',\r\n                marginTop: '100px'\r\n            }}\r\n        >\r\n            <BookForm\r\n                addBook={addBook}\r\n                updateBook={updateBook}\r\n                submitted={submitted}\r\n                data ={selectedBook}\r\n                isEdit={isEdit}\r\n                \r\n            />\r\n            <BooksTable \r\n                rows={books}\r\n                selectedBook={data =>{\r\n                        setSelectedBook(data);\r\n                        setIsEdit(true); \r\n                    }\r\n                }\r\n                deleteBook={data => window.confirm('Are you sure?')&& deleteBook(data)}\r\n                \r\n            />\r\n        </Box>\r\n        \r\n    )\r\n}\r\nexport default Books;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}